<!DOCTYPE html>
<html>
<head>
    <title>UMAP Comparison</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 0; background: #f5f5f5; }
        .header { background: #667eea; color: white; padding: 20px; }
        h1 { margin: 0; font-size: 24px; }
        .subtitle { margin: 5px 0 0 0; font-size: 13px; opacity: 0.9; }
        .grid { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; padding: 20px; max-width: 1400px; margin: 0 auto; }
        .card { background: white; border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.1); }
        .card-title { background: #f0f0f0; padding: 15px; font-weight: bold; border-bottom: 1px solid #ddd; }
        .chart { width: 100%; height: 500px; }
    </style>
</head>
<body>
    <div class="header">
        <h1>UMAP Parameter Comparison</h1>
        <p class="subtitle">Which configuration shows the tightest clusters?</p>
    </div>
    
    <div class="grid">
        <div class="card">
            <div class="card-title">1. Tight Clustering (n=10, min_dist=0.01)</div>
            <div id="chart1" class="chart"></div>
        </div>
        <div class="card">
            <div class="card-title">2. Balanced (n=15, min_dist=0.1)</div>
            <div id="chart2" class="chart"></div>
        </div>
        <div class="card">
            <div class="card-title">3. Loose Visualization (n=40, min_dist=0.15)</div>
            <div id="chart3" class="chart"></div>
        </div>
        <div class="card">
            <div class="card-title">4. Very Tight (n=8, min_dist=0.01, spread=0.5)</div>
            <div id="chart4" class="chart"></div>
        </div>
    </div>
    
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <script>
        const configs = [
            { div: 'chart1', file: 'viz_umap_tight_clustering', name: 'Tight Clustering' },
            { div: 'chart2', file: 'viz_umap_balanced', name: 'Balanced' },
            { div: 'chart3', file: 'viz_umap_loose_visualization', name: 'Loose Visualization' },
            { div: 'chart4', file: 'viz_umap_very_tight', name: 'Very Tight' }
        ];
        
        configs.forEach(cfg => {
            fetch(`https://storage.googleapis.com/od-cl-odss-conroyri-nih-embeddings/sample/${cfg.file}.json`)
                .then(r => r.json())
                .then(data => {
                    const xs = data.points.map(p => p.x);
                    const ys = data.points.map(p => p.y);
                    const clusters = data.points.map(p => p.c);
                    
                    const trace = {
                        x: xs,
                        y: ys,
                        mode: 'markers',
                        marker: {
                            size: 4,
                            color: clusters,
                            colorscale: 'Viridis',
                            opacity: 0.6
                        },
                        type: 'scatter'
                    };
                    
                    const layout = {
                        margin: { l: 0, r: 0, t: 0, b: 0 },
                        xaxis: { showgrid: false, zeroline: false, showticklabels: false },
                        yaxis: { showgrid: false, zeroline: false, showticklabels: false },
                        hovermode: false
                    };
                    
                    Plotly.newPlot(cfg.div, [trace], layout, { responsive: true, displayModeBar: false });
                })
                .catch(e => console.error(cfg.file, e));
        });
    </script>
</body>
</html>
